# Vercel 错误监控系统

## 🎯 功能概述

这是一个实时的 Vercel 错误监控系统，专为 Coding 模式设计，可以：

- 🔍 **实时监控** Vercel 部署错误
- 🚨 **智能错误检测** 自动识别构建、语法、编译错误
- 💡 **修复建议** 针对常见错误提供解决方案
- 📋 **一键复制** 将错误信息格式化后复制到输入框
- 📊 **可视化界面** 美观的错误列表和详情显示

## 🚀 使用场景

### 1. 开发过程中的错误监控
当您在 Coding 模式下编写代码时，系统会自动监控您的 Vercel 部署状态，一旦检测到构建错误会立即弹出通知。

### 2. 错误信息分析
系统会解析错误日志，提取关键信息：
- 错误类型（语法错误、编译错误、运行时错误）
- 出错文件和行号
- 错误详细描述
- 智能修复建议

### 3. 快速错误修复
通过"复制错误到输入框"功能，可以将格式化的错误信息直接发送给 AI 助手，获得针对性的修复建议。

## 🔧 配置说明

### 环境变量配置

在您的 `.env.local` 文件中添加以下配置：

```bash
# Vercel Error Monitoring
NEXT_PUBLIC_VERCEL_TOKEN=your_vercel_access_token
NEXT_PUBLIC_VERCEL_PROJECT_ID=your_project_id  
NEXT_PUBLIC_VERCEL_TEAM_ID=your_team_id
```

### 获取 Vercel Token

1. 访问 [Vercel Dashboard](https://vercel.com/dashboard)
2. 进入 **Settings** → **Tokens**
3. 创建新的 Access Token
4. 复制 Token 到环境变量

### 获取 Project ID

1. 在 Vercel Dashboard 中选择您的项目
2. 进入 **Settings** → **General**
3. 复制 Project ID

### 获取 Team ID (可选)

如果您使用团队账户：
1. 在 Vercel Dashboard 中进入团队设置
2. 复制 Team ID

## 🎨 界面说明

### 状态指示器

错误监控系统在 Coding 模式下会在右下角显示部署状态指示器：

- 🔵 **部署中** - 蓝色，带有旋转动画
- 🟢 **部署成功** - 绿色，表示当前部署正常
- 🔴 **部署失败** - 红色，点击可查看错误详情
- 🟡 **排队中** - 黄色，部署正在队列中等待

### 错误监控面板

点击错误状态指示器后会打开错误监控面板，包含：

#### 左侧：错误列表
- 显示所有检测到的错误
- 按时间倒序排列
- 显示错误类型标签和基本信息

#### 右侧：错误详情
- 完整的错误信息
- 文件位置和行号
- 智能修复建议
- 原始错误日志
- 操作按钮（复制到输入框、查看部署等）

## 🛠️ 错误类型

系统可以识别以下错误类型：

### 语法错误 (Syntax Error)
- **特征**: 代码语法不正确
- **示例**: 缺少括号、引号不匹配
- **建议**: 检查代码语法，使用 IDE 语法检查

### 编译错误 (Compilation Error)
- **特征**: TypeScript/JavaScript 编译失败
- **示例**: 类型错误、模块未找到
- **建议**: 检查类型定义、导入路径

### 运行时错误 (Runtime Error)
- **特征**: 代码运行时发生的错误
- **示例**: 空值引用、函数未定义
- **建议**: 添加空值检查、确认函数存在

### 构建错误 (Build Error)
- **特征**: 构建过程中的一般性错误
- **示例**: 依赖安装失败、配置错误
- **建议**: 检查依赖配置、构建脚本

## 💡 使用技巧

### 1. 自动错误检测
- 系统每 30 秒自动检查一次部署状态
- 检测到错误会立即显示通知
- 只在 Coding 模式下启用监控

### 2. 手动检查
- 点击"检查最新"按钮可立即检查部署状态
- 适用于刚完成代码修改后快速验证

### 3. 错误信息复制
- 点击"复制错误到输入框"会自动格式化错误信息
- 格式：文件位置 + 错误描述 + 请求帮助的提示
- 可直接发送给 AI 助手获得修复建议

### 4. 批量错误处理
- 系统会收集所有错误，按时间排序
- 可以逐个查看和处理每个错误
- 最多保留 50 个最新错误

## 🔍 故障排除

### 监控无法启动
1. 检查环境变量是否正确配置
2. 确认 Vercel Token 有效且有足够权限
3. 检查网络连接

### 无法获取错误信息
1. 确认项目 ID 正确
2. 检查 Token 权限是否包含部署信息读取
3. 确认项目确实存在部署错误

### 错误信息不准确
1. 部分错误可能需要时间才能在 Vercel API 中可见
2. 某些类型的错误可能不会被 Vercel 事件系统捕获
3. 建议结合 Vercel Dashboard 查看完整日志

## 🌟 最佳实践

1. **定期检查**: 在修改代码后手动检查一次部署状态
2. **及时修复**: 发现错误后立即处理，避免累积
3. **学习模式**: 观察常见错误模式，提高代码质量
4. **备份方案**: 重要修改前建议在本地测试通过再部署

## 🔗 相关链接

- [Vercel API 文档](https://vercel.com/docs/rest-api)
- [Vercel SDK 文档](https://github.com/vercel/sdk)
- [部署故障排除](https://vercel.com/docs/deployments/troubleshoot-a-build)