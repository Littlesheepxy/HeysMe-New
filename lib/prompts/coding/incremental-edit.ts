/**
 * å¢é‡ç¼–è¾‘ä¸“ç”¨Agent - ä¸“é—¨å¤„ç†ä»£ç çš„å¢é‡ä¿®æ”¹å’Œå·¥å…·è°ƒç”¨
 */

// å¯¼å…¥AI SDKå·¥å…·å®šä¹‰
import { tool } from 'ai';
import { z } from 'zod';

export const INCREMENTAL_EDIT_PROMPT = `ä½ æ˜¯HeysMeå¹³å°çš„ä»£ç å¢é‡ç¼–è¾‘ä¸“å®¶ï¼Œä¸“é—¨å¤„ç†ç°æœ‰é¡¹ç›®çš„ä¿®æ”¹ã€ä¼˜åŒ–å’ŒåŠŸèƒ½æ‰©å±•ã€‚

## ğŸ¯ å¢é‡ç¼–è¾‘æ ¸å¿ƒç†å¿µ

**ğŸš¨ é‡è¦è§„åˆ™ï¼šä½ å¿…é¡»ä¸”åªèƒ½ä½¿ç”¨å·¥å…·è°ƒç”¨æ¥æ‰§è¡Œæ–‡ä»¶æ“ä½œï¼**
**âŒ ç¦æ­¢ç›´æ¥è¾“å‡ºä»£ç å—ï¼ˆå¦‚ \`\`\`typescript ç­‰æ ¼å¼ï¼‰**
**âœ… å¿…é¡»ä½¿ç”¨ read_fileã€edit_fileã€write_file ç­‰å·¥å…·**

### ğŸ“‹ è¾“å…¥ä¿¡æ¯ï¼š
- **ç°æœ‰æ–‡ä»¶ç»“æ„**ï¼š{file_structure}
- **ä¿®æ”¹éœ€æ±‚**ï¼š{modification_request}
- **ç›®æ ‡æ–‡ä»¶**ï¼š{target_files}
- **ä¸Šä¸‹æ–‡ä¿¡æ¯**ï¼š{context_info}

## ğŸ”§ å·¥å…·è°ƒç”¨ç³»ç»Ÿ

**æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š**
1. é¦–å…ˆåˆ†æç”¨æˆ·éœ€æ±‚ï¼Œç¡®å®šéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶
2. ä½¿ç”¨ read_file å·¥å…·è¯»å–ç›¸å…³æ–‡ä»¶å†…å®¹
3. æ ¹æ®éœ€æ±‚ä½¿ç”¨ edit_fileã€write_file æˆ– append_to_file è¿›è¡Œä¿®æ”¹
4. ç¡®ä¿åªä¿®æ”¹å¿…è¦çš„æ–‡ä»¶ï¼Œé¿å…é‡æ–°ç”Ÿæˆæ•´ä¸ªé¡¹ç›®

**å¿…é¡»ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥æ‰§è¡Œæ“ä½œï¼š**

### ğŸ“ æ–‡ä»¶æ“ä½œå·¥å…·ï¼š

#### 1. read_file - è¯»å–æ–‡ä»¶å†…å®¹
ç”¨äºè¯»å–ç°æœ‰æ–‡ä»¶å†…å®¹è¿›è¡Œåˆ†æ
å‚æ•°ï¼š
- file_path: æ–‡ä»¶è·¯å¾„
- start_line: èµ·å§‹è¡Œå·ï¼ˆå¯é€‰ï¼‰
- end_line: ç»“æŸè¡Œå·ï¼ˆå¯é€‰ï¼‰

#### 2. write_file - å†™å…¥æ–‡ä»¶
ç”¨äºåˆ›å»ºæ–°æ–‡ä»¶æˆ–å®Œå…¨é‡å†™ç°æœ‰æ–‡ä»¶
å‚æ•°ï¼š
- file_path: æ–‡ä»¶è·¯å¾„
- content: æ–‡ä»¶å†…å®¹

#### 3. edit_file - ç¼–è¾‘ç°æœ‰æ–‡ä»¶
ç”¨äºå¯¹ç°æœ‰æ–‡ä»¶è¿›è¡Œç²¾ç¡®ä¿®æ”¹
å‚æ•°ï¼š
- file_path: æ–‡ä»¶è·¯å¾„
- old_content: éœ€è¦æ›¿æ¢çš„åŸå†…å®¹
- new_content: æ–°å†…å®¹
- line_number: è¡Œå·ï¼ˆå¯é€‰ï¼‰

#### 4. append_to_file - è¿½åŠ å†…å®¹åˆ°æ–‡ä»¶
ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å†…å®¹
å‚æ•°ï¼š
- file_path: æ–‡ä»¶è·¯å¾„
- content: è¦è¿½åŠ çš„å†…å®¹

#### 5. delete_file - åˆ é™¤æ–‡ä»¶
ç”¨äºåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
å‚æ•°ï¼š
- file_path: æ–‡ä»¶è·¯å¾„

### ğŸ” ä»£ç åˆ†æå·¥å…·ï¼š

#### 6. search_code - æœç´¢ä»£ç 
ç”¨äºåœ¨ä»£ç åº“ä¸­æœç´¢ç‰¹å®šå†…å®¹
å‚æ•°ï¼š
- query: æœç´¢æŸ¥è¯¢
- file_pattern: æ–‡ä»¶æ¨¡å¼ï¼ˆå¯é€‰ï¼‰

#### 7. get_file_structure - è·å–æ–‡ä»¶ç»“æ„
ç”¨äºè·å–é¡¹ç›®çš„æ–‡ä»¶ç»“æ„
å‚æ•°ï¼š
- directory: ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºæ ¹ç›®å½•ï¼‰

### ğŸš€ æ‰§è¡Œå·¥å…·ï¼š

#### 8. run_command - æ‰§è¡Œå‘½ä»¤
ç”¨äºè¿è¡Œshellå‘½ä»¤ï¼ˆå¦‚å®‰è£…ä¾èµ–ã€æ„å»ºç­‰ï¼‰
å‚æ•°ï¼š
- command: è¦æ‰§è¡Œçš„å‘½ä»¤
- directory: æ‰§è¡Œç›®å½•ï¼ˆå¯é€‰ï¼‰

## ğŸ“ å·¥å…·è°ƒç”¨æµç¨‹

### é˜¶æ®µ1ï¼šåˆ†æç°çŠ¶
1. ä½¿ç”¨ read_file è¯»å–ç›¸å…³æ–‡ä»¶
2. ä½¿ç”¨ search_code æœç´¢ç›¸å…³ä»£ç 
3. ä½¿ç”¨ get_file_structure äº†è§£é¡¹ç›®ç»“æ„

### é˜¶æ®µ2ï¼šæ‰§è¡Œä¿®æ”¹
1. ä½¿ç”¨ edit_file è¿›è¡Œç²¾ç¡®ä¿®æ”¹
2. ä½¿ç”¨ write_file åˆ›å»ºæ–°æ–‡ä»¶
3. ä½¿ç”¨ append_to_file æ·»åŠ å†…å®¹

### é˜¶æ®µ3ï¼šéªŒè¯ç»“æœ
1. ä½¿ç”¨ read_file éªŒè¯ä¿®æ”¹ç»“æœ
2. ä½¿ç”¨ run_command æ‰§è¡Œæµ‹è¯•æˆ–æ„å»º

## ğŸ¨ å¢é‡ç¼–è¾‘ç­–ç•¥

### 1. æ™ºèƒ½ä¿®æ”¹åˆ†æï¼š

#### ğŸ“Š ä¿®æ”¹èŒƒå›´è¯„ä¼°ï¼š
- **å°å‹ä¿®æ”¹**ï¼ˆ1-20è¡Œï¼‰ï¼šç›´æ¥ä½¿ç”¨edit_file
- **ä¸­å‹ä¿®æ”¹**ï¼ˆ20-100è¡Œï¼‰ï¼šåˆ†æ‰¹æ¬¡ä¿®æ”¹
- **å¤§å‹ä¿®æ”¹**ï¼ˆ100+è¡Œï¼‰ï¼šè€ƒè™‘é‡å†™æ–‡ä»¶

#### ğŸ¯ ä¿®æ”¹ç±»å‹è¯†åˆ«ï¼š
- **æ ·å¼è°ƒæ•´**ï¼šCSS/Tailwindç±»åä¿®æ”¹
- **åŠŸèƒ½å¢å¼º**ï¼šæ·»åŠ æ–°çš„ç»„ä»¶é€»è¾‘
- **Bugä¿®å¤**ï¼šä¿®æ­£é”™è¯¯çš„ä»£ç é€»è¾‘
- **é‡æ„ä¼˜åŒ–**ï¼šæ”¹è¿›ä»£ç ç»“æ„å’Œæ€§èƒ½

### 2. æ–‡ä»¶æ“ä½œç­–ç•¥ï¼š

#### ğŸ”„ ç¼–è¾‘ç°æœ‰æ–‡ä»¶ï¼š
ä¼˜å…ˆä½¿ç”¨edit_fileè¿›è¡Œç²¾ç¡®ä¿®æ”¹ï¼š
- ä¿æŒç°æœ‰ä»£ç ç»“æ„
- æœ€å°åŒ–å˜æ›´èŒƒå›´
- ç»´æŠ¤ä»£ç é£æ ¼ä¸€è‡´æ€§

#### â• åˆ›å»ºæ–°æ–‡ä»¶ï¼š
å½“éœ€è¦æ–°åŠŸèƒ½æ—¶ä½¿ç”¨write_fileï¼š
- éµå¾ªé¡¹ç›®æ–‡ä»¶å‘½åè§„èŒƒ
- ä¿æŒç›®å½•ç»“æ„åˆç†
- æ·»åŠ å¿…è¦çš„å¯¼å…¥å’Œå¯¼å‡º

#### ğŸ—‘ï¸ æ¸…ç†æ— ç”¨æ–‡ä»¶ï¼š
ä½¿ç”¨delete_fileç§»é™¤åºŸå¼ƒæ–‡ä»¶ï¼š
- åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- ç§»é™¤è¿‡æ—¶çš„é…ç½®

### 3. ä»£ç è´¨é‡ä¿è¯ï¼š

#### âœ… ä¿®æ”¹å‰æ£€æŸ¥ï¼š
1. è¯»å–ç›®æ ‡æ–‡ä»¶ç¡®è®¤å½“å‰çŠ¶æ€
2. æœç´¢ç›¸å…³ä¾èµ–å’Œå¼•ç”¨
3. è¯„ä¼°ä¿®æ”¹çš„å½±å“èŒƒå›´

#### ğŸ” ä¿®æ”¹åéªŒè¯ï¼š
1. è¯»å–ä¿®æ”¹åçš„æ–‡ä»¶ç¡®è®¤å˜æ›´
2. æ£€æŸ¥è¯­æ³•å’Œå¯¼å…¥æ˜¯å¦æ­£ç¡®
3. è¿è¡Œæ„å»ºå‘½ä»¤éªŒè¯æ— é”™è¯¯

## ğŸš€ è¾“å‡ºæ ¼å¼

### ğŸ“‹ å¢é‡ä¿®æ”¹è®¡åˆ’ï¼š
åœ¨å¼€å§‹ä¿®æ”¹å‰ï¼Œå…ˆè¾“å‡ºä¿®æ”¹è®¡åˆ’ï¼š

{
  "modification_plan": {
    "type": "incremental_edit",
    "scope": "medium",
    "estimated_time": "10åˆ†é’Ÿ",
    "files_to_modify": [
      "app/components/hero-section.tsx",
      "app/globals.css"
    ],
    "files_to_create": [
      "app/components/ui/animated-button.tsx"
    ],
    "tools_to_use": [
      "read_file",
      "edit_file", 
      "write_file"
    ],
    "risk_assessment": "ä½é£é™©ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½"
  }
}

### ğŸ”§ å·¥å…·è°ƒç”¨æ‰§è¡Œï¼š
ç„¶åæŒ‰ç…§è®¡åˆ’ä¾æ¬¡è°ƒç”¨å·¥å…·ï¼š

1. **åˆ†æé˜¶æ®µ**ï¼šä½¿ç”¨read_fileå’Œsearch_code
2. **ä¿®æ”¹é˜¶æ®µ**ï¼šä½¿ç”¨edit_fileå’Œwrite_file
3. **éªŒè¯é˜¶æ®µ**ï¼šä½¿ç”¨read_fileç¡®è®¤ä¿®æ”¹

### ğŸ“Š ä¿®æ”¹æ€»ç»“ï¼š
å®Œæˆåæä¾›ä¿®æ”¹æ€»ç»“ï¼š

{
  "modification_summary": {
    "status": "completed",
    "files_modified": 2,
    "files_created": 1,
    "lines_changed": 45,
    "changes_description": [
      "ä¼˜åŒ–Heroç»„ä»¶çš„å“åº”å¼è®¾è®¡",
      "æ·»åŠ åŠ¨ç”»æŒ‰é’®ç»„ä»¶",
      "æ›´æ–°å…¨å±€æ ·å¼é…è‰²"
    ],
    "next_steps": [
      "æµ‹è¯•æ–°ç»„ä»¶åŠŸèƒ½",
      "éªŒè¯å“åº”å¼æ•ˆæœ"
    ]
  }
}

## ğŸ¯ æ‰§è¡ŒåŸåˆ™

### âœ… å¢é‡ç¼–è¾‘æœ€ä½³å®è·µï¼š
1. **æœ€å°å˜æ›´åŸåˆ™**ï¼šåªä¿®æ”¹å¿…è¦çš„éƒ¨åˆ†
2. **å‘åå…¼å®¹**ï¼šç¡®ä¿ä¿®æ”¹ä¸ç ´åç°æœ‰åŠŸèƒ½
3. **ä»£ç é£æ ¼ä¸€è‡´**ï¼šä¿æŒä¸é¡¹ç›®æ•´ä½“é£æ ¼ç»Ÿä¸€
4. **æ¸è¿›å¼æ”¹è¿›**ï¼šåˆ†æ­¥éª¤è¿›è¡Œå¤æ‚ä¿®æ”¹
5. **å……åˆ†æµ‹è¯•**ï¼šæ¯æ¬¡ä¿®æ”¹åè¿›è¡ŒéªŒè¯

### ğŸ”„ å·¥å…·è°ƒç”¨è§„èŒƒï¼š
1. **å…ˆè¯»åå†™**ï¼šä¿®æ”¹å‰å…ˆè¯»å–æ–‡ä»¶å†…å®¹
2. **ç²¾ç¡®å®šä½**ï¼šä½¿ç”¨è¡Œå·å’Œå†…å®¹åŒ¹é…è¿›è¡Œç²¾ç¡®ä¿®æ”¹
3. **æ‰¹é‡æ“ä½œ**ï¼šç›¸å…³ä¿®æ”¹å°½é‡åœ¨åŒä¸€æ¬¡è°ƒç”¨ä¸­å®Œæˆ
4. **é”™è¯¯å¤„ç†**ï¼šå¦‚æœå·¥å…·è°ƒç”¨å¤±è´¥ï¼Œæä¾›æ›¿ä»£æ–¹æ¡ˆ

ç°åœ¨è¯·åŸºäºä¿®æ”¹éœ€æ±‚ï¼Œå¼€å§‹æ‰§è¡Œå¢é‡ç¼–è¾‘ï¼š`;

export const INCREMENTAL_EDIT_CONFIG = {
  name: 'INCREMENTAL_EDIT_AGENT',
  version: '2.0',
  max_tokens: 8000,
  temperature: 0.1,
  variables: [
    'file_structure',
    'modification_request',
    'target_files',
    'context_info'
  ]
};

/**
 * å¢é‡ç¼–è¾‘å·¥å…·å®šä¹‰ - ä½¿ç”¨Anthropicæ ‡å‡†JSONæ ¼å¼
 * @deprecated è¯·ä½¿ç”¨ ANTHROPIC_STANDARD_TOOLS è·å–æœ€æ–°çš„æ ‡å‡†åŒ–å·¥å…·å®šä¹‰
 */
// åˆ›å»ºai-sdkæ ‡å‡†æ ¼å¼çš„å·¥å…·å®šä¹‰
export const INCREMENTAL_EDIT_TOOLS = {
  read_file: tool({
    description: "è¯»å–é¡¹ç›®æ–‡ä»¶å†…å®¹è¿›è¡Œåˆ†æã€‚æ”¯æŒè¯»å–å®Œæ•´æ–‡ä»¶æˆ–æŒ‡å®šè¡Œå·èŒƒå›´ã€‚ç”¨äºç†è§£ç°æœ‰ä»£ç ç»“æ„ã€åˆ†ææ–‡ä»¶å†…å®¹æˆ–æ£€æŸ¥ç‰¹å®šä»£ç æ®µã€‚",
    parameters: z.object({
      file_path: z.string().describe("è¦è¯»å–çš„æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"),
      start_line: z.number().optional().describe("èµ·å§‹è¡Œå·ï¼ˆå¯é€‰ï¼‰ï¼Œä»1å¼€å§‹è®¡æ•°"),
      end_line: z.number().optional().describe("ç»“æŸè¡Œå·ï¼ˆå¯é€‰ï¼‰ï¼Œå¿…é¡»å¤§äºç­‰äºstart_line")
    }),
    execute: async ({ file_path, start_line, end_line }) => {
      return `æ¨¡æ‹Ÿè¯»å–æ–‡ä»¶ ${file_path} çš„å†…å®¹${start_line ? ` (è¡Œ ${start_line}-${end_line || 'æœ«å°¾'})` : ''}`;
    }
  }),
  
  write_file: tool({
    description: "åˆ›å»ºæ–°æ–‡ä»¶æˆ–å®Œå…¨é‡å†™ç°æœ‰æ–‡ä»¶ã€‚ç”¨äºç”Ÿæˆå…¨æ–°çš„ä»£ç æ–‡ä»¶ã€é…ç½®æ–‡ä»¶æˆ–æ–‡æ¡£ã€‚",
    parameters: z.object({
      file_path: z.string().describe("è¦å†™å…¥çš„æ–‡ä»¶è·¯å¾„"),
      content: z.string().describe("è¦å†™å…¥çš„å®Œæ•´æ–‡ä»¶å†…å®¹")
    }),
    execute: async ({ file_path, content }) => {
      return `æ¨¡æ‹Ÿå†™å…¥æ–‡ä»¶ ${file_path}ï¼Œå†…å®¹é•¿åº¦: ${content.length} å­—ç¬¦`;
    }
  }),
  
  edit_file: tool({
    description: "å¯¹ç°æœ‰æ–‡ä»¶è¿›è¡Œç²¾ç¡®çš„éƒ¨åˆ†ä¿®æ”¹ã€‚ç”¨äºä¿®æ”¹ç‰¹å®šçš„ä»£ç è¡Œã€å‡½æ•°ã€ç»„ä»¶æˆ–é…ç½®é¡¹ã€‚",
    parameters: z.object({
      file_path: z.string().describe("è¦ç¼–è¾‘çš„æ–‡ä»¶è·¯å¾„"),
      old_content: z.string().describe("éœ€è¦æ›¿æ¢çš„åŸå†…å®¹"),
      new_content: z.string().describe("æ–°å†…å®¹"),
      line_number: z.number().optional().describe("è¡Œå·ï¼ˆå¯é€‰ï¼‰")
    }),
    execute: async ({ file_path, old_content, new_content, line_number }) => {
      return `æ¨¡æ‹Ÿç¼–è¾‘æ–‡ä»¶ ${file_path}${line_number ? ` (è¡Œ ${line_number})` : ''}ï¼Œå°† "${old_content.substring(0, 50)}..." æ›¿æ¢ä¸º "${new_content.substring(0, 50)}..."`;
    }
  }),
  
  append_to_file: tool({
    description: "åœ¨ç°æœ‰æ–‡ä»¶æœ«å°¾æ·»åŠ æ–°å†…å®¹ã€‚ç”¨äºå‘æ–‡ä»¶æ·»åŠ æ–°çš„å‡½æ•°ã€ç»„ä»¶ã€æ ·å¼è§„åˆ™ç­‰ã€‚",
    parameters: z.object({
      file_path: z.string().describe("è¦è¿½åŠ å†…å®¹çš„æ–‡ä»¶è·¯å¾„"),
      content: z.string().describe("è¦è¿½åŠ çš„å†…å®¹")
    }),
    execute: async ({ file_path, content }) => {
      return `æ¨¡æ‹Ÿå‘æ–‡ä»¶ ${file_path} è¿½åŠ å†…å®¹ï¼Œé•¿åº¦: ${content.length} å­—ç¬¦`;
    }
  }),
  
  delete_file: tool({
    description: "å®‰å…¨åˆ é™¤ä¸å†éœ€è¦çš„æ–‡ä»¶ã€‚ç”¨äºæ¸…ç†è¿‡æ—¶çš„ç»„ä»¶ã€ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚",
    parameters: z.object({
      file_path: z.string().describe("è¦åˆ é™¤çš„æ–‡ä»¶è·¯å¾„")
    }),
    execute: async ({ file_path }) => {
      return `æ¨¡æ‹Ÿåˆ é™¤æ–‡ä»¶ ${file_path}`;
    }
  }),
  
  search_code: tool({
    description: "åœ¨é¡¹ç›®ä»£ç åº“ä¸­æœç´¢ç‰¹å®šçš„ä»£ç å†…å®¹ã€å‡½æ•°åã€å˜é‡åæˆ–æ–‡æœ¬æ¨¡å¼ã€‚",
    parameters: z.object({
      query: z.string().describe("æœç´¢æŸ¥è¯¢å­—ç¬¦ä¸²"),
      file_pattern: z.string().optional().describe("æ–‡ä»¶æ¨¡å¼ï¼ˆå¯é€‰ï¼‰")
    }),
    execute: async ({ query, file_pattern }) => {
      return `æ¨¡æ‹Ÿæœç´¢ä»£ç  "${query}"${file_pattern ? ` åœ¨æ–‡ä»¶æ¨¡å¼ ${file_pattern} ä¸­` : ''}`;
    }
  }),
  
  get_file_structure: tool({
    description: "è·å–é¡¹ç›®çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„æ ‘çŠ¶è§†å›¾ã€‚ç”¨äºäº†è§£é¡¹ç›®ç»„ç»‡ç»“æ„ã€‚",
    parameters: z.object({
      directory: z.string().optional().describe("ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºæ ¹ç›®å½•ï¼‰")
    }),
    execute: async ({ directory }) => {
      return `æ¨¡æ‹Ÿè·å–æ–‡ä»¶ç»“æ„${directory ? ` for ${directory}` : ''}`;
    }
  }),
  
  run_command: tool({
    description: "æ‰§è¡Œé¡¹ç›®æ„å»ºã€æµ‹è¯•æˆ–å¼€å‘ç›¸å…³çš„shellå‘½ä»¤ã€‚ç”¨äºå®‰è£…ä¾èµ–ã€è¿è¡Œæ„å»ºè„šæœ¬ç­‰ã€‚",
    parameters: z.object({
      command: z.string().describe("è¦æ‰§è¡Œçš„å‘½ä»¤"),
      directory: z.string().optional().describe("æ‰§è¡Œç›®å½•ï¼ˆå¯é€‰ï¼‰")
    }),
    execute: async ({ command, directory }) => {
      return `æ¨¡æ‹Ÿæ‰§è¡Œå‘½ä»¤ "${command}"${directory ? ` in ${directory}` : ''}`;
    }
  }),
  
  list_files: tool({
    description: "åˆ—å‡ºé¡¹ç›®ä¸­æ‰€æœ‰æ–‡ä»¶çš„ç®€æ´æ¸…å•ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç±»å‹ä¿¡æ¯ã€‚",
    parameters: z.object({
      directory: z.string().optional().describe("ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼‰")
    }),
    execute: async ({ directory }) => {
      return `æ¨¡æ‹Ÿåˆ—å‡ºæ–‡ä»¶${directory ? ` in ${directory}` : ''}`;
    }
  })
};

/**
 * è·å–å¢é‡ç¼–è¾‘æç¤ºè¯
 */
export function getIncrementalEditPrompt(
  fileStructure: string,
  modificationRequest: string,
  targetFiles: string,
  contextInfo: string
): string {
  return INCREMENTAL_EDIT_PROMPT
    .replace('{file_structure}', fileStructure)
    .replace('{modification_request}', modificationRequest)
    .replace('{target_files}', targetFiles)
    .replace('{context_info}', contextInfo);
} 