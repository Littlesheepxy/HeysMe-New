# HeysMe 增量修改测试项目

这是一个专门用于测试HeysMe平台增量修改功能的示例项目。包含了各种常见的React组件和代码模式，可以用来全面测试AI代理的代码理解和修改能力。

## 📁 项目结构

```
test-project/
├── components/          # React组件
│   ├── Hero.tsx        # 首页横幅组件
│   ├── Button.tsx      # 通用按钮组件  
│   └── Card.tsx        # 卡片容器组件
├── pages/              # 页面文件
│   └── index.tsx       # 主页面
└── README.md           # 本文档
```

## 🧪 测试场景

### 1. **基础组件修改**
- **文件**: `components/Hero.tsx`
- **测试内容**: 样式修改、文本更新、结构调整
- **示例提示词**: 
  - "将Hero组件的标题颜色改为紫色"
  - "添加一个副标题到Hero组件"
  - "修改按钮的hover效果"

### 2. **复杂组件重构**
- **文件**: `components/Button.tsx`
- **测试内容**: 类型定义、Props接口、样式系统
- **示例提示词**:
  - "为Button组件添加loading状态"
  - "将Tailwind样式改为CSS Modules"
  - "添加图标支持到Button组件"

### 3. **状态管理测试**
- **文件**: `pages/index.tsx`
- **测试内容**: useState钩子、事件处理、条件渲染
- **示例提示词**:
  - "添加一个新的计数器到首页"
  - "修改模态框的动画效果"
  - "增加表单验证功能"

### 4. **项目结构分析**
- **测试内容**: 文件搜索、代码分析、依赖关系
- **示例提示词**:
  - "查找所有使用useState的组件"
  - "分析项目的组件依赖关系"
  - "列出所有可以优化的地方"

## 🔧 如何使用

### 方法1: 使用测试页面 (推荐)

1. 访问 `/test-incremental-tools` 页面
2. 选择预设的测试场景或输入自定义提示词
3. 观察实时的工具调用过程
4. 查看详细的执行结果和统计信息

### 方法2: 直接API调用

```bash
# 发送测试请求
curl -X POST http://localhost:3000/api/test-incremental \\
  -H "Content-Type: application/json" \\
  -d '{
    "prompt": "将Hero组件的标题颜色改为紫色",
    "projectFiles": [
      {
        "filename": "components/Hero.tsx",
        "content": "...",
        "language": "typescript"
      }
    ],
    "scenarioId": "react-component-edit"
  }'
```

### 方法3: 在聊天界面测试

1. 进入HeysMe的聊天界面
2. 选择"增量编辑"模式
3. 上传test-project文件或复制代码内容
4. 发送修改指令

## 📊 测试指标

### 工具调用准确性
- ✅ **正确的工具选择** - AI是否选择了合适的工具
- ✅ **参数格式正确** - 工具参数是否符合JSON Schema
- ✅ **执行顺序合理** - 工具调用的逻辑顺序是否正确

### 代码修改质量
- ✅ **语法正确性** - 修改后的代码是否无语法错误
- ✅ **逻辑完整性** - 功能是否按预期工作
- ✅ **代码风格一致** - 是否保持原有的代码风格

### 用户体验
- ✅ **响应速度** - 工具执行的时间是否合理
- ✅ **错误处理** - 错误信息是否清晰有用
- ✅ **进度显示** - 用户是否能清楚了解执行进度

## 🎯 测试用例库

### 基础测试用例

1. **样式修改**
   ```
   将Hero组件的背景颜色改为渐变色（从蓝色到紫色）
   ```

2. **文本更新**
   ```
   修改Hero组件的标题为"欢迎使用AI代码助手"
   ```

3. **功能添加**
   ```
   为Button组件添加loading状态，显示加载动画
   ```

### 中级测试用例

1. **组件重构**
   ```
   将Button组件的所有Tailwind类名替换为CSS变量
   ```

2. **状态管理**
   ```
   添加一个全局主题切换功能，支持暗色模式
   ```

3. **错误处理**
   ```
   为所有组件添加错误边界和fallback UI
   ```

### 高级测试用例

1. **架构重构**
   ```
   将所有组件从Tailwind CSS迁移到Styled Components
   ```

2. **性能优化**
   ```
   使用React.memo优化所有组件的渲染性能
   ```

3. **类型系统**
   ```
   为所有组件添加完整的TypeScript类型定义和泛型支持
   ```

## 🐛 已知限制

1. **文件大小限制** - 单个文件不应超过10KB
2. **复杂重构** - 涉及多个文件的复杂重构可能需要分步执行
3. **外部依赖** - 不会自动安装新的npm包

## 📝 测试记录模板

```markdown
### 测试日期: YYYY-MM-DD
### 测试场景: [场景名称]
### 提示词: "[具体的测试指令]"

#### 预期结果:
- [ ] 工具调用正确
- [ ] 代码修改准确
- [ ] 语法无错误

#### 实际结果:
- 工具调用序列: [list of tools]
- 执行时间: [duration]ms
- 错误信息: [if any]

#### 改进建议:
[具体的改进建议]
```

## 🚀 扩展这个测试项目

您可以根据需要添加更多的测试文件:

1. **添加新组件** - 创建更复杂的组件用于测试
2. **添加样式文件** - 测试CSS/SCSS的修改能力  
3. **添加配置文件** - 测试配置文件的解析和修改
4. **添加测试文件** - 测试AI对测试代码的理解

## 📞 反馈和建议

如果您在测试过程中发现问题或有改进建议，请：

1. 记录详细的测试步骤和结果
2. 保存错误日志和工具调用记录
3. 提供具体的改进建议
4. 分享成功的测试用例

这个测试项目将持续更新，以适应新的功能和改进需求。
