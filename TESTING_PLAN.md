# 🧪 VercelAI 信息收集 Agent 测试计划

## 📅 测试时间表
**建议测试时间**: 明天上午 9:00-12:00（3小时）

## 🎯 测试目标
1. **功能验证** - 确保新Agent所有功能正常
2. **性能对比** - 验证新Agent性能是否优于旧Agent
3. **业务逻辑** - 确保轮次控制、推进条件等逻辑正确
4. **兼容性** - 确保与现有系统完美集成
5. **稳定性** - 验证错误处理和边界情况

---

## 🚀 第一阶段：基础功能测试（30分钟）

### 1.1 访问测试页面
```
http://localhost:3000/test-info-collection-comparison
```

### 1.2 GitHub链接测试
**测试内容**:
```
https://github.com/torvalds 这是Linux之父的GitHub，请帮我分析一下他的技术背景
```

**预期结果**:
- ✅ 能够识别GitHub链接
- ✅ 调用analyze_github工具
- ✅ 返回用户分析结果
- ✅ 提取技术技能和项目经验

### 1.3 LinkedIn链接测试
**测试内容**:
```
https://linkedin.com/in/jeffweiner08 这是我的LinkedIn资料
```

**预期结果**:
- ✅ 识别LinkedIn链接
- ✅ 调用extract_linkedin工具
- ✅ 返回职业背景分析

### 1.4 个人网站测试
**测试内容**:
```
https://dan.luu.com 这是一个技术博客，请分析作者的技术背景
```

**预期结果**:
- ✅ 识别网页链接
- ✅ 调用scrape_webpage工具
- ✅ 分析网站内容

### 1.5 纯文本描述测试
**测试内容**:
```
我是一名前端开发工程师，有5年React和Vue经验，熟悉TypeScript、Node.js，参与过多个大型电商项目，目前在一家互联网公司担任高级前端工程师
```

**预期结果**:
- ✅ 理解文本描述
- ✅ 提取关键信息
- ✅ 生成结构化分析

---

## ⚡ 第二阶段：性能对比测试（45分钟）

### 2.1 对比测试设置
- **测试模式**: 选择"对比测试"
- **测试轮次**: 每个场景测试3次
- **记录指标**: 响应时间、响应数量、成功率

### 2.2 复杂场景测试
**测试内容**:
```
我的GitHub: https://github.com/username
个人网站: https://myportfolio.com  
LinkedIn: https://linkedin.com/in/myprofile
我是全栈开发工程师，精通React、Node.js、Python，有AI和区块链项目经验
```

**关注指标**:
- 🕐 **响应时间**: VercelAI vs Optimized
- 📊 **工具调用数量**: 应该调用多个工具
- 🎯 **综合分析**: 新Agent应该有synthesize_profile结果

### 2.3 性能基准测试
| 测试场景 | OptimizedAgent | VercelAIAgent | 期望改进 |
|---------|----------------|---------------|----------|
| 单个GitHub链接 | _记录时间_ | _记录时间_ | 相近或更快 |
| 多个链接 | _记录时间_ | _记录时间_ | 更快 |
| 纯文本 | _记录时间_ | _记录时间_ | 更快 |
| 复杂混合 | _记录时间_ | _记录时间_ | 明显更快 |

---

## 🔄 第三阶段：业务逻辑测试（60分钟）

### 3.1 首次欢迎流程测试

**步骤**:
1. 清除浏览器缓存/使用无痕模式
2. 访问主聊天页面: `http://localhost:3000/chat`
3. 完成Welcome阶段，进入Info Collection

**测试点**:
- ✅ 首次进入显示欢迎消息
- ✅ 引导用户提供资料
- ✅ 不会重复发送欢迎消息

### 3.2 轮次控制测试

**测试场景**: 模拟"试一试"用户
1. 设置commitment_level为"试一试"
2. 连续发送简短消息测试轮次限制
3. 验证3轮后自动推进

**测试消息序列**:
```
轮次1: "我是程序员"
轮次2: "有3年经验"  
轮次3: "熟悉Java"
轮次4: 应该自动推进到下一阶段
```

### 3.3 推进条件测试

**测试场景**: 信息充足时自动推进
```
我是高级软件工程师，GitHub: https://github.com/example，
有8年开发经验，精通Java、Python、React，
参与过多个大型项目，目前在字节跳动工作
```

**预期结果**:
- ✅ 收集到足够信息后自动推进
- ✅ 生成collection_summary
- ✅ 设置ready_for_next_stage: true

---

## 🛠️ 第四阶段：工具调用测试（45分钟）

### 4.1 单工具测试
分别测试每个工具的独立功能:

**analyze_github**:
```
https://github.com/gaearon
```

**scrape_webpage**:
```
https://overreacted.io
```

**extract_linkedin**:
```
https://linkedin.com/in/dan-abramov
```

### 4.2 多工具并行测试
**测试内容**:
```
GitHub: https://github.com/sindresorhus
网站: https://sindresorhus.com
这是一位非常活跃的开源开发者
```

**验证点**:
- ✅ 同时调用多个工具
- ✅ 工具结果正确整合
- ✅ 使用synthesize_profile综合分析

### 4.3 工具失败处理测试
**测试无效链接**:
```
https://github.com/nonexistentuser123456
https://invalidwebsite.notreal
```

**预期结果**:
- ✅ 优雅处理工具失败
- ✅ 不会导致整个流程中断
- ✅ 提供有意义的错误信息

---

## 🔍 第五阶段：边界情况测试（30分钟）

### 5.1 空输入测试
```
""
" "
"..."
```

### 5.2 超长输入测试
```
[准备一段2000字的个人介绍]
```

### 5.3 特殊字符测试
```
我的GitHub: https://github.com/user-name_123
邮箱: test@example.com
电话: +86-138-0000-0000
```

### 5.4 多语言测试
```
I am a software engineer with 5 years of experience.
My GitHub: https://github.com/example
```

---

## 📊 第六阶段：集成测试（30分钟）

### 6.1 完整流程测试
1. **Welcome阶段** → **Info Collection阶段** → **Design阶段**
2. 验证数据在阶段间正确传递
3. 确认session数据完整性

### 6.2 并发测试
- 同时打开多个浏览器标签
- 测试不同session的独立性
- 验证没有数据串扰

---

## 📋 测试记录表格

### 功能测试记录
| 测试项目 | OptimizedAgent | VercelAIAgent | 状态 | 备注 |
|---------|----------------|---------------|------|------|
| GitHub链接解析 | ⬜ | ⬜ | ⬜ |  |
| LinkedIn提取 | ⬜ | ⬜ | ⬜ |  |
| 网页抓取 | ⬜ | ⬜ | ⬜ |  |
| 文本分析 | ⬜ | ⬜ | ⬜ |  |
| 多工具并行 | ⬜ | ⬜ | ⬜ |  |
| 综合分析 | ❌ | ⬜ | ⬜ |  |

### 性能测试记录
| 场景 | OptimizedAgent时间 | VercelAIAgent时间 | 改进 | 状态 |
|------|-------------------|------------------|------|------|
| 单链接 |  |  |  | ⬜ |
| 多链接 |  |  |  | ⬜ |
| 纯文本 |  |  |  | ⬜ |
| 复杂场景 |  |  |  | ⬜ |

### 业务逻辑测试记录
| 逻辑点 | 测试结果 | 状态 | 问题 |
|--------|----------|------|------|
| 首次欢迎 |  | ⬜ |  |
| 轮次控制 |  | ⬜ |  |
| 自动推进 |  | ⬜ |  |
| 强制推进 |  | ⬜ |  |

---

## 🚨 问题排查指南

### 常见问题及解决方案

#### 1. Agent无响应
**检查**:
- 控制台是否有错误
- 网络请求是否成功
- API端点是否正常

#### 2. 工具调用失败
**检查**:
- 服务配置是否正确
- API密钥是否有效
- 网络连接是否正常

#### 3. 性能问题
**检查**:
- 工具调用是否超时
- 并发请求是否过多
- 内存使用是否正常

#### 4. 数据传递问题
**检查**:
- session数据结构
- metadata字段完整性
- 阶段间数据传递

---

## ✅ 测试完成标准

### 必须通过的测试
- ✅ 所有基础功能正常
- ✅ 性能不低于旧Agent
- ✅ 业务逻辑完全正确
- ✅ 错误处理优雅
- ✅ 集成测试通过

### 可选优化项
- 🎯 性能明显提升
- 🎯 新功能表现优秀
- 🎯 用户体验改善
- 🎯 代码质量提升

---

## 📞 测试支持

如果测试过程中遇到问题:
1. **查看控制台日志** - 浏览器开发者工具
2. **检查网络请求** - Network标签
3. **查看API响应** - 测试页面的详细结果
4. **记录问题现象** - 便于后续修复

**测试完成后，请提供**:
- ✅ 通过的测试项目列表
- ❌ 失败的测试项目和错误信息
- 📊 性能对比数据
- 💡 改进建议

祝测试顺利！🚀
